import glob

# Get all the build variables we need
Import('env', 'mymode', 'debugcflags', 'releasecflags')
localenv = env.Clone()

src_files = 'test.cpp ../Field.cpp'
lib_files = 'gtest pthread json'
output_file = 'test'
include_path = '../../../include/'
lib_path = ['../../../lib', localenv['GOOGLE_TEST_PATH']]


# Append the user's additional compile flags
# Assume debugcflags and releasecflags are defined
if mymode == 'debug':
    localenv.Append(CPPFLAGS=Split(debugcflags))
else:
    localenv.Append(CPPFLAGS=Split(releasecflags))

localenv.Append(CPPPATH=Split( include_path))

# Actually build the Library
localenv.Program( output_file, \
                Split(src_files), \
                LIBS=Split(lib_files), \
                LIBPATH=lib_path)

